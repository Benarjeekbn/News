<%- include ('head.ejs')%>
    <%- include ('header.ejs')%>

        <main class="container">
                    <section class="pt-4 pb-0 card-grid">
                        <div class="container">
                            <div class="row g-4">
                                <div class="col-lg-6">
                                    <div class="card card-overlay-bottom card-grid-lg card-bg-scale"
                                        style="background-image:url('<%=data[0].urlToImage%>'); background-position: center left; background-size: cover;  height: 500px;">
                                        <span class="card-featured" title="Featured post"><i
                                                class="fas fa-star"></i></span>
                                        <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                                            <div class="w-100 mt-auto">
                                                <a href="#" class="badge text-bg-danger mb-2"><i
                                                        class="fas fa-circle me-2 small fw-bold"></i><%=data[0].source.name%></a>
                                                <h2 class="text-white h1"><a href="<%=data[0].url%>"
                                                        class="btn-link stretched-link text-reset">
                                                        <%=data[0].title%>
                                                    </a></h2>
                                                <p class="text-white">
                                                    <%=data[0].description%>
                                                </p>
                                                <ul
                                                    class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                                    <li class="nav-item">
                                                        <div class="nav-link">
                                                            <div
                                                                class="d-flex align-items-center text-white position-relative">
                                                                <div class="avatar avatar-sm">
                                                                    
                                                                </div>
                                                                <span class="ms-3">by <a href="#"
                                                                        class="stretched-link text-reset btn-link">
                                                                        <%=data[0].author%>
                                                                    </a></span>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    <li class="nav-item">
                                                        <%=new Date(data[0].publishedAt).toDateString();%>
                                                    </li>
                                                    
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="row g-4">
                                        <div class="col-12">
                                            <div class="card card-overlay-bottom card-grid-sm card-bg-scale"
                                                style="background-image:url(<%=data[1].urlToImage%>); background-position: center left; background-size: cover; height: 250px;">
                                                <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                                                    <div class="w-100 mt-auto">
                                                        <a href="#" class="badge text-bg-warning mb-2"><i
                                                                class="fas fa-circle me-2 small fw-bold"></i><%=data[1].source.name%></a>
                                                        <h4 class="text-white"><a href="<%=data[1].url%>"
                                                                class="btn-link stretched-link text-reset"><%=data[1].title%></a></h4>
                                                        <ul
                                                            class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                                            <li class="nav-item position-relative">
                                                                <div class="nav-link">by <a href="#"
                                                                        class="stretched-link text-reset btn-link"><%=data[1].author%></a>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item"><%=new Date(data[1].publishedAt).toDateString();%></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card card-overlay-bottom card-grid-sm card-bg-scale"
                                                style="background-image:url(<%=data[2].urlToImage%>); background-position: center left; background-size: cover; height: 220px;">
                                                <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                                                    <div class="w-100 mt-auto">
                                                        <a href="#" class="badge text-bg-success mb-2"><i
                                                                class="fas fa-circle me-2 small fw-bold"></i><%=data[2].source.name%></a>
                                                        <h4 class="text-white"><a href="<%=data[2].url%>"
                                                                class="btn-link stretched-link text-reset"><%=data[2].title%></a></h4>
                                                        <ul
                                                            class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                                            <li class="nav-item position-relative">
                                                                <div class="nav-link">by <a href="#"
                                                                        class="stretched-link text-reset btn-link"><%=data[2].author%></a>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item"><%=new Date(data[2].publishedAt).toDateString();%></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card card-overlay-bottom card-grid-sm card-bg-scale"
                                                style="background-image:url(<%=data[3].urlToImage%>); background-position: center left; background-size: cover; height: 220px;">
                                                <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                                                    <div class="w-100 mt-auto">
                                                        <a href="#" class="badge text-bg-info mb-2"><i
                                                                class="fas fa-circle me-2 small fw-bold"></i><%=data[3].source.name%></a>
                                                        <h4 class="text-white"><a href="<%=data[3].url%>"
                                                                class="btn-link stretched-link text-reset"><%=data[3].title%></a></h4>
                                                        <ul
                                                            class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                                            <li class="nav-item position-relative">
                                                                <div class="nav-link">by <a href="#"
                                                                        class="stretched-link text-reset btn-link"><%=data[3].author%></a>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item"><%=new Date(data[3].publishedAt).toDateString();%></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                



<section>
            <div class="row g-5">
                <div class="col-md-8">
                  <h3 class="pb-4 mb-4 fst-italic border-bottom">
                    Headlines...
                  </h3>
                  <% for(let i=4;i<data.length;i++){%>
                    <% if(data.length!=0) { %>
                  <div class="card border rounded-3 up-hover p-4 mb-4">

                      <div class="row">
                        <div class="col-md-5">
                          <img class="rounded-3" src="<%=data[i].urlToImage%>" alt="" > 
                        </div>
                        <div class="col-md-7 mt-3 mt-md-0">
                          <a href="#" class="badge bg-info mb-2 "><i class="fas fa-circle me-2 small fw-bold"></i><%=data[i].source.name%></a>
    
                          <a class="nav-item dropdown ms-sm-auto ">
                            <a class="nav-link mb-0  text-reset btn-link" style="float: right;" href="#" id="cardShareAction" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              <i class="bi bi-three-dots-vertical"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu" aria-labelledby="cardShareAction">
                              <li class="dropdown-submenu dropleft">
                                <a href="#" role="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share fa-fw pe-2"></i>Share post via …</a>
                                <ul class="dropdown-menu dropdown-submenu">
                                    <li style="padding: 10px;"><a style="padding: 10px;" class="btn-tweet" href="https://twitter.com/intent/tweet?text=YOUR-TITLE&url=<%=data[i].url%>&via=TWITTER-HANDLE"><i class="bi bi-twitter me-8"></i></a><a class="btn-facebook" href="https://www.facebook.com/sharer/sharer.php?u=<%=data[i].url%>"><i class="bi bi-facebook"></i></a></li>
                                    <li></li>
                                </ul>
                              </li>
                             <li class="dropdown-submenu dropleft">
                                <a href="#" role="button" class="dropdown-item dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-bookmark-check fa-fw pe-2"></i> Bookmark </a>
                                <ul class="dropdown-menu dropdown-submenu">
                                  <%if(user!=false){%>
                                    <li>
                                      <form action="/bookmarks" method="GET">
                                        <button type="submit" class="dropdown-item" >create category!</button>
                                      </form>
                                    </li>
                                    <%if(category.length!=0){%>
                                  <%for(let j=0;j<category.length;j++){%>
                                  <li>
                                      <form action="/bookmark/<%=category[j].categoryId%>/<%=data[i].url%>" method="post">
                                        <button type="submit" class="dropdown-item" ><%=category[j].categoryName%></button>
                                      </form>
                                  </li>
                                  <%}%>
                                 
                                  <% } %>
                                  <%} else {%>
                                    <li style="padding: 10px;"><a href="/signin">Signin</a> to bookmark!</li>
                                    <% } %>
                              </ul>
                              </li>
                            </ul>
                          </a> 
                          <h3><a href="<%=data[i].url%>" id="url" class="btn-link  text-dark fw-bold"><%=data[i].title%></a></h3>
                          <p><%=data[i].description%></p>
                         
                          <ul class="nav nav-divider align-items-center d-none d-sm-inline-block">
                            <li class="nav-item">
                              <div class="nav-link">
                                <div class="d-flex align-items-center position-relative">
                                  <div class="avatar avatar-xs">
                                    
                                  </div>
                                  <span class="ms-3">by <a href="#" class=""><%=data[i].author%></a></span>
                                </div>
                              </div>
                            </li>
                            
                            
                            <div class="nav-item"><%=new Date(data[i].publishedAt).toDateString();%></div>
                          </ul>
                        </div>
                      </div>
                    </div>


                    
                  <% } else { %>
                    <section>
                        <h1>Some went wrong we will get back to you</h1>
                    </section>
                <% } %>
            <% } %>
            
                
            
                </div>
            
                <div class="col-md-4">
                  <div class="position-sticky" style="top: 2rem;">
                    <div class="p-4 mb-3 bg-light rounded">
                      <h4 class="fst-italic">MyBookmarks</h4>
                      <p class="mb-0">
                        <% if(user==false) { %>
                        Sign in to view your bookmarks
                        <a href="/signin">
                        <button type="button" class="btn btn-outline-primary">signin</button> </a>
                        <% } else {%>
                        
                        <%if (bookmarks.length!=0){%>
                        <% for(let j=0;j<bookmarks.length;j++){ %>
                          
                       <p class="nav-item"><a href="<%=bookmarks[j].url%>" class="nav-link"><i class="bi bi-caret-right-fill"></i><%=bookmarks[j].title%></a></p>
                     
                      <% } %>
                      <% } else {%>
                        Bookmark some article's to see here!!

                      <% } %>
                      <% } %>
                     
                      </p>
                    </div>
            
                    
                  </div>
                </div>
              </div>
            </section>
        </main>
        
        <script>
document.addEventListener("DOMContentLoaded", function(){
if (window.innerWidth < 992) {
  document.querySelectorAll('.navbar .dropdown').forEach(function(everydropdown){
    everydropdown.addEventListener('hidden.bs.dropdown', function () {
        this.querySelectorAll('.submenu').forEach(function(everysubmenu){
          everysubmenu.style.display = 'none';
        });
    })
  });

  document.querySelectorAll('.dropdown-menu a').forEach(function(element){
    element.addEventListener('click', function (e) {
        let nextEl = this.nextElementSibling;
        if(nextEl && nextEl.classList.contains('submenu')) {	
          e.preventDefault();
          if(nextEl.style.display == 'block'){
            nextEl.style.display = 'none';
          } else {
            nextEl.style.display = 'block';
          }

        }
    });
  })
}
}); 
        </script>
</body>

</html>
